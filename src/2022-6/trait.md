# 2022年6月29日

## 今日の学習内容

トレイト：共通の振る舞いを定義する

### トレイト:共通の振る舞いを定義する

トレイトは、Rustコンパイラに、特定の型に存在し、他の型と共有できる機能について知らせます。
トレイトを使用すると、共通の振る舞いを抽象的に定義できます。
トレイト境界を使用すると、あるジェネリックが、特定の振る舞いをもつあらゆる型になり得ることを指定できます。

>トレイトの機能としては
>
>・Rustコンパイラに知らせる（特定の型に存在し、他の方と共有できる機能について）
>
>・共通の振る舞いを抽象的に定義できます
>
>・トレイト境界というのがある
>
>・とあるジェネリックが、特定の振る舞いをもつあらゆる型になり得る

という機能があったりするということです。

>注釈：違いはあるものの、トレイトは他の言語でよくインターフェイスと呼ばれる機能に類似しています。

#### トレイトを定義する

型の振る舞いは、その型に対して呼び出せるメソッドから構成されます。異なる型は、それらの型全てに対して同じメソッドを呼び出せるなら、同じ振る舞いを共有することになります。トレイト定義は、メソッドシグニチャをあるグループにまとめ、なんらかの目的を達成するのに必要な一連の振る舞いを定義する手段です。

> 基本的な考え方としては型の定義が違うけど、実際のロジックは同じという状況が発生すると、同じコードを再度書くのがDRY（Don't Repeat Yourself)の原則から外れるからやめた方がいいよということです。（別に使っても問題ないです。一緒に働く仲間からは嫌われる可能性があるので、仲良くしたい人はうまく書けないことを伝えておくか、共通化が必要になったときにどのようにしたらいいのか？テックリードあたりに確認するのがいいです）
>
> で、そのテックリードとかが「知るか！」という場合はあっていないので職場を離れましょう。基本的にコード戦略等は指揮をとる人に確認します。自分勝手なコードを書かないように、この時強い言葉（パンチラインの効いた言葉）を使う人とは仕事をするのは要注意です。（京都的な嫌味な言い回しも気をつけましょう）「結構学生の頃頑張ってたんですね。」とかは「お前のコードは学生レベルだからな」という言い回しですので、非常に気をつけましょう。

例えば、いろんな種類や量のテキストを保持する複数の構造体があるとしましょう:特定の場所から送られる新しいニュースを保持する`NewsArticle`と、新規ツイートか、リツイートか、はたまた他のツイートへのリプライなのかを示すメタデータを伴う最大で280文字までの`Tweet`です。

`NewsArticle`または`Tweet`インスタンスに保存されているデータのサマリーを表示できるメディアアグリゲータライブラリを作成します。これをするには、各型のサマリーが必要で、インスタンスで`summarize`メソッドを呼び出してサマリーを要求する必要があります。リスト10-12は、この振る舞いを表現する`Summary`トレイトの定義を表示しています。

> 要するにここではツイートやニュース記事の統計データと目次を表示できるライブラリを作ろうとします。アグリゲートは「集める」や「合計する」「集計する」という意味があります。なのでイメージとしては2chまとめサイトがいいかと思います。

ファイル名: src/lib.rs

```rust
# #![allow(unused)]
# fn main() {
pub trait Summary {
    fn summarize(&self) -> String;
}
# }
```

テスト